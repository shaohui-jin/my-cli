import{E as A,d as Z,r as C,i as G,c as ee,o as le,n as E,g as te,s as x,a as ae,b as e,e as u,f as y,F as b,h as oe,j as ne,k as se,l as ie,u as V,m as re}from"./index-1d98e04c.js";const ue=a=>{let c="";if(!/^#?[0-9A-Fa-f]{6}$/.test(a))return A.warning("输入错误的hex");a=a.replace("#",""),c=a.match(/../g);for(let s=0;s<3;s++)c[s]=parseInt(c[s],16);return c},ce=(a,c,t)=>{const s=/^\d{1,3}$/;if(!s.test(a)||!s.test(c)||!s.test(t))return A.warning("输入错误的rgb颜色值");const i=[a.toString(16),c.toString(16),t.toString(16)];for(let d=0;d<3;d++)i[d].length==1&&(i[d]=`0${i[d]}`);return`#${i.join("")}`},L=(a,c)=>{if(!/^#?[0-9A-Fa-f]{6}$/.test(a))return A.warning("输入错误的hex颜色值");const s=ue(a);for(let i=0;i<3;i++)s[i]=Math.floor((255-s[i])*c+s[i]);return ce(s[0],s[1],s[2])},de=a=>a.replace(/(^\s*)|(\s*$)/g,""),ye=(a,c)=>{document.getElementById(c)!==null&&document.body.removeChild(document.getElementById(c));const t=document.createElement("canvas");t.width=200,t.height=100;const s=t.getContext("2d");s.rotate(-15*Math.PI/180),s.font="12px",s.fillStyle="rgba(200, 200, 200, 0.30)",s.textBaseline="Middle",s.fillText(a,t.width/10,t.height/2);const i=document.createElement("div");i.id=c,i.style.pointerEvents="none",i.style.top="15px",i.style.left="0px",i.style.position="fixed",i.style.zIndex="10000000",i.style.width=`${document.documentElement.clientWidth}px`,i.style.height=`${document.documentElement.clientHeight}px`,i.style.background=`url(${t.toDataURL("image/png")}) left top repeat`,document.body.appendChild(i)},M=Math.random().toString(),I={set:a=>{ye(a,M)},del:()=>{document.getElementById(M)!==null&&document.body.removeChild(document.getElementById(M))}};function ge(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!se(a)}const me=Z({setup(){const{proxy:a}=ie(),c=C(G()),t=ee(()=>V().useThemeStore),s=n=>{i(`--color-${n}`,t.value[n]),S()},i=(n,g)=>{document.documentElement.style.setProperty(n,g);for(let p=1;p<=9;p++)document.documentElement.style.setProperty(`${n}-light-${p}`,L(g,p/10))},d=n=>{document.documentElement.style.setProperty(`--bg-${n}`,t.value[n]),o(),f(),m(),S()},o=()=>{k(".layout-navbar-breadcrumb-index",t.value.isTopBarColorGradual,t.value.topBar)},f=()=>{k(".layout-container .el-aside",t.value.isMenuBarColorGradual,t.value.menuBar)},m=()=>{k(".layout-container .layout-columns-aside",t.value.isColumnsMenuBarColorGradual,t.value.columnsMenuBar)},k=(n,g,p)=>{E(()=>{const T=document.querySelector(n);if(!T)return!1;g?T.setAttribute("style",`background-image:linear-gradient(to bottom left , ${p}, ${L(p,.6)})`):T.setAttribute("style",`background-image:${p}`)})},h=()=>{E(()=>{setTimeout(()=>{const n=document.querySelectorAll(".el-menu-item"),g=document.querySelector(".el-menu-item.is-active");if(!g)return!1;t.value.isMenuBarColorHighlight?(n.forEach(p=>p.setAttribute("id","")),g.setAttribute("id","add-is-active"),x("menuBarHighlightId",g.getAttribute("id"),{type:"localStorage"})):g.setAttribute("id","")},0)})},l=()=>{h(),S()},r=()=>{t.value.isFixedHeaderChange=!t.value.isFixedHeader},v=()=>{t.value.isBreadcrumb=!1,a.mittBus.emit("getBreadcrumbIndexSetFilterRoutes")},U=()=>{t.value.isShowLogoChange=!t.value.isShowLogo},H=()=>{t.value.layout==="classic"&&(t.value.isClassicSplitMenu=!1)},P=()=>{a.mittBus.emit("openOrCloseSortable")},z=()=>{a.mittBus.emit("openShareTagsView")},w=n=>{n==="grayscale"?t.value.isGrayscale&&(t.value.isInvert=!1):t.value.isInvert&&(t.value.isGrayscale=!1);const g=n==="grayscale"?`grayscale(${t.value.isGrayscale?1:0})`:`invert(${t.value.isInvert?"80%":"0%"})`;document.body.setAttribute("style",`filter: ${g}`)},D=()=>{const n=document.documentElement;t.value.isIsDark?n.setAttribute("data-theme","dark"):n.setAttribute("data-theme","")},F=()=>{t.value.isWatermark?I.set(t.value.watermarkText):I.del()},R=n=>{if(t.value.watermarkText=de(n),t.value.watermarkText==="")return!1;t.value.isWatermark&&I.set(t.value.watermarkText)},W=n=>{if(x("oldLayout",JSON.stringify(n),{type:"localStorage"}),t.value.layout===n)return!1;t.value.layout=n,t.value.isDrawer=!1,B(),h()},B=()=>{d("menuBar"),d("menuBarColor"),d("topBar"),d("topBarColor")},q=()=>{t.value.isFixedHeaderChange=!1,t.value.isShowLogoChange=!1,t.value.isDrawer=!1},O=()=>{t.value.isDrawer=!0},S=()=>{_()},_=()=>{x("themeConfigStyle",document.documentElement.style.cssText,{type:"localStorage"})},j=()=>{const n=V().useThemeStore;n.isDrawer=!1,re(JSON.stringify(n)).then(()=>{t.value.isDrawer=!1})},N=()=>{V().useThemeStore.$reset(),window.location.reload()},$=()=>{setTimeout(()=>{o(),f(),m(),h()},1300)};le(()=>{E(()=>{te("frequency",{type:"localStorage"})||B(),x("frequency","1",{type:"localStorage"}),a.mittBus.on("onSignInClick",()=>{$()}),a.mittBus.on("onMenuClick",()=>{h()}),a.mittBus.on("layoutMobileResize",n=>{t.value.layout=n.layout,t.value.isDrawer=!1,B(),h(),c.value=G()}),setTimeout(()=>{$(),t.value.isGrayscale&&w("grayscale"),t.value.isInvert&&w("invert"),t.value.isIsDark&&D(),F()},100)})}),ae(()=>{a.mittBus.off("onMenuClick"),a.mittBus.off("onSignInClick"),a.mittBus.off("layoutMobileResize")});const J=C([{label:"primary",key:"primary",type:"color"},{label:"success",key:"success",type:"color"},{label:"info",key:"info",type:"color"},{label:"warning",key:"warning",type:"color"},{label:"danger",key:"danger",type:"color"}]),K=C([{label:"顶栏背景",key:"topBar",onChange:()=>d("topBar"),type:"color"},{label:"菜单背景",key:"menuBar",onChange:()=>d("menuBar"),type:"color"},{label:"分栏菜单背景",key:"columnsMenuBar",onChange:()=>d("columnsMenuBar"),type:"color"},{label:"顶栏默认字体颜色",key:"topBarColor",onChange:()=>d("topBarColor"),type:"color"},{label:"菜单默认字体颜色",key:"menuBarColor",onChange:()=>d("menuBarColor"),type:"color"},{label:"分栏菜单默认字体颜色",key:"columnsMenuBarColor",onChange:()=>d("columnsMenuBarColor"),type:"color"},{label:"顶栏背景渐变",key:"isTopBarColorGradual",onChange:()=>o(),type:"switch"},{label:"菜单背景渐变",key:"isMenuBarColorGradual",onChange:()=>f(),type:"switch"},{label:"分栏菜单背景渐变",key:"isColumnsMenuBarColorGradual",onChange:()=>m(),type:"switch"},{label:"菜单字体背景高亮",key:"isMenuBarColorHighlight",onChange:()=>h(),type:"switch"}]),Q=C([{label:"侧边栏 Logo",key:"isShowLogo",type:"switch",onChange:()=>U()},{label:"开启 Breadcrumb",key:"isBreadcrumb",type:"switch",style:{opacity:t.value.layout==="classic"||t.value.layout==="transverse"?.5:1},disabled:t.value.layout==="classic"||t.value.layout==="transverse",onChange:()=>H()},{label:"开启 Breadcrumb 图标",key:"isBreadcrumbIcon",type:"switch"},{label:"开启 TagView",key:"isTagView",type:"switch"},{label:"开启 TagView 图标",key:"isTagViewIcon",type:"switch"},{label:"开启 TagView 缓存",key:"isCacheTagView",type:"switch"},{label:"开启 TagView 拖拽",key:"isSortableTagView",type:"switch",style:{opacity:c.value?.5:1},disabled:c.value,onChange:()=>P()},{label:"开启 TagView 共用",key:"isShareTagView",type:"switch",onChange:()=>z()},{label:"开启 Footer",key:"isFooter",type:"switch"},{label:"灰色模式",key:"isGrayscale",type:"switch",onChange:()=>w("grayscale")},{label:"色弱模式",key:"isInvert",type:"switch",onChange:()=>w("invert")},{label:"深色模式",key:"isIsDark",type:"switch",onChange:()=>D()},{label:"开启水印",key:"isWatermark",type:"switch",onChange:()=>F()},{label:"水印文案",key:"watermarkText",type:"input",elStyle:{width:"90px"},disabled:c.value,onInput:n=>R(n)}]),X=C([{label:"菜单水平折叠",key:"isCollapse",type:"switch",onChange:()=>l()},{label:"菜单手风琴",key:"isUniqueOpened",type:"switch"},{label:"固定 Header",key:"isFixedHeader",type:"switch",onChange:()=>r()},{label:"经典布局分割菜单",key:"isClassicSplitMenu",type:"switch",style:{opacity:t.value.layout!=="classic"?.5:1},onChange:()=>v()},{label:"开启锁屏",key:"isLockScreen",type:"switch"},{label:"自动锁屏(s/秒)",key:"lockScreenTime",type:"input-number",elStyle:{width:"90px"}}]),Y=C([{label:"TagView 风格",key:"tagStyle",type:"select",elStyle:{width:"90px"},options:[{label:"风格1",value:"tags-style-one"},{label:"风格2",value:"tags-style-two"},{label:"风格3",value:"tags-style-three"},{label:"风格4",value:"tags-style-four"},{label:"风格5",value:"tags-style-five"}]},{label:"主页面切换动画",key:"animation",type:"select",elStyle:{width:"90px"},options:[{label:"slide-right",value:"slide-right"},{label:"slide-left",value:"slide-left"},{label:"opacitys",value:"opacitys"}]},{label:"分栏高亮风格",key:"columnsAsideStyle",type:"select",elStyle:{width:"90px"},options:[{label:"圆角",value:"columns-round"},{label:"卡片",value:"columns-card"}]},{label:"分栏布局风格",key:"columnsAsideLayout",type:"select",elStyle:{width:"90px"},options:[{label:"水平",value:"columns-horizontal"},{label:"垂直",value:"columns-vertical"}]}]);return{globalTheme:J,globalMenu:K,globalPageShow:Q,globalPageSetting:X,otherSetting:Y,openDrawer:O,onColorPickerChange:s,themeConfig:t,onDrawerClose:q,onSetLayout:W,onCopyConfigClick:j,onResetConfigClick:N}},render(){const{globalTheme:a,globalMenu:c,globalPageShow:t,globalPageSetting:s,otherSetting:i,onColorPickerChange:d,themeConfig:o,onDrawerClose:f,onSetLayout:m,onCopyConfigClick:k,onResetConfigClick:h}=this;return e(b,null,[e("div",{class:"layout-breadcrumb-setting"},[e(u("el-drawer"),{title:"布局配置",modelValue:o.isDrawer,"onUpdate:modelValue":l=>o.isDrawer=l,direction:"rtl","destroy-on-close":!0,size:"240px",onClose:f},{default:()=>[e(u("el-scrollbar"),{class:"layout-breadcrumb-setting-bar"},{default:()=>[e(u("el-divider"),{"content-position":"left"},{default:()=>[y("全局主题")]}),a.map(l=>e(b,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex"},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[l.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[e(u("el-color-picker"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,onChange:()=>d(l.key)},null)])])])),e(u("el-divider"),{"content-position":"left"},{default:()=>[y("菜单 / 顶栏")]}),c.map(l=>e(b,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex"},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[l.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[l.type==="color"&&e(u("el-color-picker"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange()},null),l.type==="switch"&&e(u("el-switch"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange()},null)])])])),e(u("el-divider"),{"content-position":"left"},{default:()=>[y("界面设置")]}),s.map(l=>e(b,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex"},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[l.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[l.type==="input-number"&&e(u("el-input-number"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,"controls-position":"right",min:1,max:9999,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange(),size:"small",style:l.elStyle},null),l.type==="switch"&&e(u("el-switch"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange()},null)])])])),e(u("el-divider"),{"content-position":"left"},{default:()=>[y("界面显示")]}),t.map(l=>e(b,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex",style:l.style||{}},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[l.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[l.type==="color"&&e(u("el-color-picker"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange()},null),l.type==="switch"&&e(u("el-switch"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,disabled:l.disabled||!1,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange()},null),l.type==="input"&&e(u("el-input"),{modelValue:o[l.key],"onUpdate:modelValue":r=>o[l.key]=r,disabled:l.disabled||!1,style:l.elStyle||{},onInput:r=>(l==null?void 0:l.onInput)&&l.onInput(r)},null)])])])),e(u("el-divider"),{"content-position":"left"},{default:()=>[y("其它设置")]}),i.map(l=>{let r;return e(b,null,[e("div",{class:"layout-breadcrumb-setting-bar-flex",style:l.style||{}},[e("div",{class:"layout-breadcrumb-setting-bar-flex-label"},[l.label]),e("div",{class:"layout-breadcrumb-setting-bar-flex-value"},[l.type==="select"&&e(u("el-select"),{modelValue:o[l.key],"onUpdate:modelValue":v=>o[l.key]=v,placeholder:"请选择",size:"small",style:l.elStyle,onChange:()=>(l==null?void 0:l.onChange)&&l.onChange()},ge(r=l.options.map(v=>e(b,null,[e(u("el-option"),{label:v.label,value:v.value},null)])))?r:{default:()=>[r]})])])])}),e(u("el-divider"),{"content-position":"left"},{default:()=>[y("布局切换")]}),e("div",{class:"layout-drawer-content-flex"},[e("div",{class:"layout-drawer-content-item",onClick:()=>m("default")},[e("section",{class:["el-container","el-circular",o.layout==="default"?"drawer-layout-active":""]},[e("aside",{class:"el-aside",style:"width: 20px"},null),e("section",{class:"el-container is-vertical"},[e("header",{class:"el-header",style:"height: 10px"},null),e("main",{class:"el-main"},null)])]),e("div",{class:["layout-tips-warp",o.layout==="default"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[y("默认")])])])]),e("div",{class:"layout-drawer-content-item",onClick:()=>m("classic")},[e("section",{class:["el-container","is-vertical","el-circular",o.layout==="classic"?"drawer-layout-active":""]},[e("header",{class:"el-header",style:"height: 10px"},null),e("section",{class:"el-container"},[e("aside",{class:"el-aside",style:"width: 20px"},null),e("section",{class:"el-container is-vertical"},[e("main",{class:"el-main"},null)])])]),e("div",{class:["layout-tips-warp",o.layout==="classic"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[y("经典")])])])]),e("div",{class:"layout-drawer-content-item",onClick:()=>m("transverse")},[e("section",{class:["el-container","is-vertical","el-circular",o.layout==="transverse"?"drawer-layout-active":""]},[e("header",{class:"el-header",style:"height: 10px"},null),e("section",{class:"el-container"},[e("section",{class:"el-container is-vertical"},[e("main",{class:"el-main"},null)])])]),e("div",{class:["layout-tips-warp",o.layout==="transverse"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[y("横向")])])])]),e("div",{class:"layout-drawer-content-item",onClick:()=>m("columns")},[e("section",{class:["el-container","el-circular",o.layout==="columns"?"drawer-layout-active":""]},[e("aside",{class:"el-aside-dark",style:"width: 10px"},null),e("aside",{class:"el-aside",style:"width: 20px"},null),e("section",{class:"el-container is-vertical"},[e("header",{class:"el-header",style:"height: 10px"},null),e("main",{class:"el-main"},null)])]),e("div",{class:["layout-tips-warp",o.layout==="columns"?"layout-tips-warp-active":""]},[e("div",{class:"layout-tips-box"},[e("p",{class:"layout-tips-txt"},[y("分栏")])])])]),e("div",{class:"copy-config"},[e(u("el-button"),{size:"small",class:"copy-config-btn",type:"primary",ref:"copyConfigBtnRef",onClick:k},{default:()=>[e(u("el-icon"),null,{default:()=>[e(oe,null,null)]}),y("一键复制配置")]}),e(u("el-button"),{size:"small",class:"copy-config-btn-reset",type:"info",onClick:h},{default:()=>[e(u("el-icon"),null,{default:()=>[e(ne,null,null)]}),y("一键恢复默认")]})])])]})]})])])}});export{me as default};
